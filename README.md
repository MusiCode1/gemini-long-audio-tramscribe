# מערכת תמלול אודיו עם Gemini

אפליקציית רשת מתקדמת לתמלול קבצי אודיו ארוכים בעברית באמצעות Google Gemini API. האפליקציה בנויה לספק תמלול איכותי, מדויק וקריא, עם התמחות בשיעורי תורה והרצאות, תוך מתן חווית משתמש פשוטה וזורמת.

## ✨ תכונות מרכזיות

*   **תמלול קבצי אודיו ארוכים:** המערכת מפצלת אוטומטית קבצים ארוכים למקטעים, מתמללת כל אחד בנפרד ומאחה את התוצאות לתמלול רציף אחד.
*   **עמידות ויעילות:** שימוש ב-`IndexedDB` לאחסון מקטעי אודיו מבטיח תמיכה בקבצים גדולים מאוד ללא קריסת הדפדפן ומפחית את השימוש בזיכרון.
*   **תמלול באיכות גבוהה:** שימוש בפרומפט מערכת מותאם אישית (`transcribe.md`) לקבלת תמלול נקי, הכולל פיסוק נכון, טיפול במונחים מקצועיים, זיהוי דוברים ועוד.
*   **התאמה אישית:** אפשרות לערוך, לשמור ולשחזר את הוראות המערכת (פרומפט) ישירות דרך הממשק.
*   **משוב בזמן אמת:** המשתמש מקבל עדכונים חיים על כל שלב בתהליך: הכנת האודיו, העלאת מקטעים, תמלול ואיחוי. כולל יומן פעילות מפורט.
*   **ממשק מודרני:** ממשק נקי, רספונסיבי, עם תמיכה מלאה ב-RTL וערכת נושא כהה.
*   **פרטיות:** כל עיבוד האודיו המקדים (פענוח וחיתוך) מתבצע בצד הלקוח בלבד. קבצי המקטעים נמחקים משרתי Google מיד לאחר התמלול.

## ⚙️ איך זה עובד? (מבט טכני)

1.  **העלאה ופענוח:** המשתמש מעלה קובץ אודיו. הדפדפן מפענח אותו באמצעות `AudioContext`.
2.  **חיתוך ואחסון:** אם הקובץ ארוך, הוא מחולק למקטעים (למשל, 20 דקות כל אחד) עם חפיפה ביניהם. כל מקטע נשמר כקובץ WAV ב-`IndexedDB` של הדפדפן.
3.  **עיבוד מקטעים (לולאה):**
    *   מקטע נטען מ-`IndexedDB`.
    *   הוא מועלה לשרתי גוגל באמצעות ה-`File API` של Gemini.
    *   נשלחת בקשת תמלול למודל `gemini-2.5-flash` עם הפניה לקובץ והוראות המערכת.
    *   התמלול מתקבל חזרה מה-API (בסטרימינג).
    *   הקובץ נמחק משרתי גוגל באופן מיידי.
4.  **איחוי (Stitching):** לאחר שכל המקטעים תומללו, התמלולים מאוחדים לטקסט אחד באמצעות ניתוח החפיפות ביניהם.
5.  **הצגת תוצאה:** התמלול המלא והסופי מוצג למשתמש.

## 🚀 הרצה מקומית

האפליקציה בנויה כפרויקט frontend טהור ללא צורך בתהליך בנייה (build).

1.  **שכפול הפרויקט:** הורד את קבצי הפרויקט למחשב שלך.
2.  **מפתח API:**
    *   השג מפתח API עבור Gemini מ-Google AI Studio.
    *   **חשוב:** האפליקציה מצפה שמפתח ה-API יהיה זמין כמשתנה סביבה גלובלי `process.env.API_KEY`. בסביבת הפיתוח שבה האפליקציה רצה, יש לדאוג להגדיר משתנה זה.
3.  **הפעלת שרת מקומי:**
    *   יש להגיש את הקבצים דרך שרת אינטרנט מקומי. לא ניתן לפתוח את `index.html` ישירות מהדפדפן בגלל מדיניות אבטחה (CORS) הקשורה למודולי JavaScript.
    *   דרך פשוטה היא להשתמש ב-Node.js עם חבילת `serve`:
        ```bash
        # התקנה (אם לא מותקן)
        npm install -g serve
        # הרצת שרת מהתיקייה הראשית של הפרויקט
        serve .
        ```
    *   לאחר מכן, פתח את הכתובת שהשרת מספק (לרוב `http://localhost:3000`).

## 📁 מבנה הפרויקט

```
.
├── components/         # רכיבי React מבודדים (העלאה, סטטוס, תוצאה וכו')
├── prompts/            # קבצי Markdown עם הוראות למודל
├── services/           # לוגיקה עסקית (תקשורת עם Gemini API)
├── utils/              # פונקציות עזר (עיבוד אודיו, אחסון מקומי, לוגים)
├── App.tsx             # הקומפוננטה הראשית של האפליקציה
├── constants.ts        # קבועים והגדרות תצורה
├── index.html          # קובץ ה-HTML הראשי
├── index.tsx           # נקודת הכניסה של האפליקציה
├── types.ts            # הגדרות טיפוסים ו-interfaces
└── README.md           # קובץ זה
```

## 🔧 תצורה וקונפיגורציה

*   **הוראות תמלול:** ניתן לשנות את התנהגות המודל על ידי עריכת הקובץ `prompts/transcribe.md` או ישירות דרך ממשק המשתמש.
*   **פרמטרים של חיתוך:** ניתן להתאים את אורך המקטעים (`CHUNK_DURATION_MIN`) ואורך החפיפה (`OVERLAP_DURATION_MIN`) בקובץ `constants.ts`.
